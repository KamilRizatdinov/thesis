<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>chart-csv</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.css" rel="stylesheet" type="text/css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.15/d3.min.js" charset="utf-8"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.min.js"></script>
</head>
<body onload="run()">

<div id="graph"></div>

<script>

function parseCSV (csv) {
  return csv.split('\n')
    .filter(function (row) {
      return !!row.trim()
    })
    .map(function (row) {
      return row.split(',')
    })
}

function haveHead (csv) {
  return !/^\d+$/.test(csv[0][0])
}

function chart (id, csv) {
  csv = parseCSV(csv)

  var columns = []
  var showLegend = haveHead(csv)

  if (showLegend) {
    csv.shift().forEach(function (head) {
      columns.push([head])
    })
  } else {
    for (var n = 0; n < csv[0].length; n++) {
      columns.push([n])
    }
  }

  csv.forEach(function (r) {
    r.forEach(function (c, i) {
      columns[i].push(parseInt(c, 10))
    })
  })

  var opts = {
    bindto: '#' + id,
    data: {
      columns: columns,
      type: 'line'
    },
    point: { show: false },
    axis: { x: { show: false } },
    legend: { show: showLegend }
  }

  c3.generate(opts)
}

function run () {
  chart('graph', csv)
}

var csv = `
asc_liftoff,asc_turbofan,js_ignition,js_sparkplug,js_turbofan
105,39,1584,76,76
103,39,1590,77,76
104,40,1591,75,80
102,38,1589,77,76
102,39,1599,76,77
104,38,1589,76,76
103,40,1585,81,75
101,39,1590,76,82
107,39,1589,82,77
107,39,1597,80,77
102,39,1584,77,75
103,38,1565,77,77
101,39,1557,75,76
102,39,1566,80,76
106,40,1563,76,76
101,39,1566,76,82
102,43,1569,76,76
103,40,1575,76,77
102,40,1570,76,76
106,39,1567,76,77
102,40,1568,76,75
101,45,1567,77,75
101,39,1563,76,77
102,39,1568,76,76
107,39,1567,77,76
101,39,1568,76,76
101,39,1572,87,80
101,39,1560,81,76
102,39,1567,76,82
106,39,1567,76,83
101,39,1566,76,77
102,38,1570,76,78
101,40,1562,77,75
101,39,1575,76,76
102,38,1555,76,76
101,39,1568,75,77
101,38,1568,77,75
100,39,1568,78,76
102,39,1586,75,76
108,40,1644,83,76
106,39,1621,76,76
100,39,1565,76,80
102,44,1573,75,76
101,39,1567,76,76
102,39,1561,76,76
101,40,1565,81,75
101,40,1556,76,76
101,39,1563,76,76
106,39,1568,75,77
101,39,1568,77,76
`

</script>
</body>
</html>
